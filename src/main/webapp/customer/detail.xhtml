<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xsi:schemaLocation="http://java.sun.com/jsf/facelets ">

<f:metadata>
    <f:viewParam name="id" value="#{customerBean.id}"/>
</f:metadata>

<h:body>

    <ui:composition template="/templates/layout.xhtml">

        <ui:define name="content">
            <h2><h:outputText value="#{customerBean.name}"/> &nbsp;<h:link outcome="/customer/add" styleClass="btn-primary btn">Add product</h:link> </h2>

            <div class="row">
                <div class="col-md-4">
                    <h3>Informations</h3>
                    <dl class="dl-horizontal">
                        <dt>Email: </dt>
                        <dd><h:outputText value="#{customerBean.email}"/></dd>
                        <dt>Default SLA: </dt>
                        <dd><h:outputText value="#{customerBean.defaultSla}"/> </dd>
                    </dl>
                </div>
                <div class="col-md-8">
                    <h3>Products</h3>

                    <p:panel>
                        <h:form>
                            <p:growl/>
                            <p:dataTable var="product" widgetVar="productTable" value="#{customerBean.getProducts()}">
                                <p:column headerText="Name" sortBy="#{product.name}">
                                    <h:outputText value="#{product.name}"/>
                                </p:column>
                                <p:column headerText="SLA" sortBy="#{product.sla}">
                                    <h:outputText value="#{product.sla}"/>
                                </p:column>
                                <p:column headerText="Price" sortBy="#{product.price}">
                                    <h:outputText value="#{product.price}"/>
                                </p:column>
                                <p:column headerText="">
                                    <h:commandLink rendered="#{price.state}" action="#{customerBean.deactivateCustomer(customer.id)}" value="Deactivate"/>
                                    |
                                    <h:link value="Detail" outcome="/product/detail">
                                        <f:param name="id" value="#{product.id}"/>
                                    </h:link>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </p:panel>
                </div>
            </div>
        </ui:define>

    </ui:composition>

</h:body>
</html>
